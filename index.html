<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> 3D UX - Full Feature Simulation</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400&display=swap');

        /* --- 1. Global Styles and Dark Mode Aesthetic --- */
        :root {
            --color-bg-primary: #121822;
            --color-text-primary: #F0F4F8;
            --color-accent-gold: #FFD700;
            --color-glass-bg: rgba(255, 255, 255, 0.08);
            --color-glass-border: rgba(255, 255, 255, 0.15);
            --blur-strength: 10px;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--color-bg-primary);
            color: var(--color-text-primary);
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
            font-size: 16px;
        }

        /* --- 2. Main Study View & Typography --- */
        .study-view {
            flex-grow: 1;
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8em;
            color: var(--color-accent-gold);
            margin-bottom: 30px;
            text-align: center;
        }

        .verse-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.25em;
            line-height: 1.8;
            margin-bottom: 25px;
            position: relative;
            cursor: pointer; /* Makes words clickable */
        }

        .verse-num {
            color: var(--color-accent-gold);
            font-size: 0.8em;
            font-weight: 700;
            margin-right: 5px;
            vertical-align: top;
            display: inline-block;
        }

        /* --- 3. Search Bar (Glassmorphism) --- */
        .search-container {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 20px 0;
            text-align: center;
        }
        
        #smartSearch {
            width: 80%;
            max-width: 600px;
            padding: 15px 25px;
            background: var(--color-glass-bg);
            backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--color-glass-border);
            border-radius: 30px;
            color: var(--color-text-primary);
            font-size: 1.1em;
            outline: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        #smartSearch:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5); /* Neumorphic inset feel */
        }

        /* --- 4. Smart Search Results Container (Layered 3D) --- */
        #searchResults {
            position: absolute;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 800px;
            z-index: 90;
            padding: 20px;
            background: rgba(18, 24, 34, 0.95); /* Semi-opaque background to anchor results */
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
            display: none;
        }

        .result-group h3 {
            color: var(--color-accent-gold);
            margin-top: 0;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        .result-card {
            background: var(--color-glass-bg);
            backdrop-filter: blur(8px);
            border: 1px solid var(--color-glass-border);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .result-card:hover {
            transform: translateY(-3px) scale(1.01);
            box-shadow: 0 8px 15px rgba(255, 215, 0, 0.2);
        }

        .result-card.factbook {
            background: rgba(255, 215, 0, 0.1); /* Slightly different material for Factbook */
        }

        /* --- 5. Original Word Pop-up (Haptic Simulation) --- */
        #wordPopup {
            position: fixed;
            bottom: -150px; /* Hidden initially */
            left: 50%;
            transform: translateX(-50%);
            width: 350px;
            padding: 20px;
            background: rgba(20, 30, 45, 0.95);
            border: 2px solid var(--color-accent-gold);
            border-radius: 15px 15px 0 0;
            box-shadow: 0 -10px 30px rgba(255, 215, 0, 0.4);
            transition: bottom 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Springy animation */
            z-index: 200;
        }
        
        #wordPopup.active {
            bottom: 0;
        }
        
        #wordPopup h3 {
            color: var(--color-accent-gold);
            margin-top: 0;
        }
        
        /* --- 6. Neumorphic Control Panel (Factbook) --- */
        .control-panel {
            width: 300px;
            background-color: #1a222f;
            box-shadow: -10px 0 20px rgba(0, 0, 0, 0.4);
            padding: 20px;
            transition: transform 0.5s ease-in-out;
            transform: translateX(100%);
            position: fixed;
            right: 0;
            height: 100%;
            overflow-y: auto;
            z-index: 50;
        }

        .control-panel.open {
            transform: translateX(0);
        }

        .neumorphic-btn {
            background-color: #1a222f;
            border: none;
            color: var(--color-text-primary);
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 10px;
            width: 100%;
            text-align: left;
            font-weight: 300;
            box-shadow: 6px 6px 12px #0f131a, -6px -6px 12px #253144;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .neumorphic-btn:active {
            box-shadow: inset 2px 2px 5px #0f131a, inset -2px -2px 5px #253144;
        }

        .factbook-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
            z-index: 200;
            background-color: var(--color-accent-gold);
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-bg-primary);
            font-size: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="factbook-toggle" onclick="togglePanel()"></div>

    <aside class="control-panel" id="controlPanel">
        <h2>Factbook & Tools</h2>
        <p style="color: #9aa9bd; font-size: 0.9em; margin-bottom: 20px;">The power delivered with depth.</p>
        <button class="neumorphic-btn" onclick="loadPassageGuide()">Passage Guide</button>
        <button class="neumorphic-btn" onclick="loadLexicon()">Original Language Lexicon</button>
        <button class="neumorphic-btn">Sermon Builder</button>
        <button class="neumorphic-btn">Timeline & Maps</button>

        <h3 style="margin-top: 30px; color: var(--color-accent-gold);">Linked Resources</h3>
        <button class="neumorphic-btn">IVP Bible Commentary</button>
        <button class="neumorphic-btn">Strong's Lexicon</button>
        <button class="neumorphic-btn">Theological Dictionary</button>
        <div id="dynamicFactbookContent" style="margin-top: 20px; color: #9aa9bd; font-size: 0.9em;">
            </div>
    </aside>

    <div id="wordPopup">
        <h3 id="popupWord">Word</h3>
        <p><strong>Definition:</strong> Word, speech, reason, or divine expression.</p>
        <p><strong>Strong's:</strong> G3056</p>
        <button style="float: right; padding: 5px 10px; background: #FFD700; border: none; border-radius: 5px;" onclick="document.getElementById('wordPopup').classList.remove('active')">Close</button>
    </div>

    <main class="study-view">
        <div class="search-container">
            <input type="text" id="smartSearch" placeholder="Smart Search: Type 'faith' or 'John 1:1'..." oninput="performSmartSearch(this.value)">
        </div>

        <div id="searchResults">
            </div>

        <h1>John 1:1-3</h1>

        <div class="verse-text" id="v1">
            <span class="verse-num">1</span> In the beginning was the <span class="original-word" onclick="showWordPopup('Word', '位纬慰')">Word</span>, and the <span class="original-word" onclick="showWordPopup('Word', '位纬慰')">Word</span> was with God, and the <span class="original-word" onclick="showWordPopup('Word', '位纬慰')">Word</span> was God.
        </div>
        
        <div class="verse-text" id="v2">
            <span class="verse-num">2</span> He was in the beginning with God.
        </div>

        <div class="verse-text" id="v3">
            <span class="verse-num">3</span> All things were made through him, and without him was not anything made that was made.
        </div>
    </main>
    
    <script>
        // --- 1. Factbook Panel Toggle ---
        function togglePanel() {
            document.getElementById('controlPanel').classList.toggle('open');
        }

        // --- 2. Original Word Pop-up (Simulates Haptic Click) ---
        function showWordPopup(englishWord, greekWord) {
            const popup = document.getElementById('wordPopup');
            document.getElementById('popupWord').innerHTML = `${greekWord} (${englishWord})`;
            
            // Simulates a smooth, springy animated slide-up
            popup.classList.add('active');
        }
        
        // --- 3. Smart Search Simulation ---
        function performSmartSearch(query) {
            const resultsDiv = document.getElementById('searchResults');
            
            if (query.length < 3) {
                resultsDiv.style.display = 'none';
                return;
            }

            // Simulate the database/API query based on the text
            const lowerQuery = query.toLowerCase();
            let resultsHTML = '';

            if (lowerQuery.includes('john 1:1')) {
                // Simulation for a specific verse lookup
                resultsHTML = `
                    <div class="result-group">
                        <h3>Passage Lookup (Exact Match)</h3>
                        <div class="result-card">
                            <p><strong>John 1:1 (KJV)</strong>: In the beginning was the Word, and the Word was with God...</p>
                        </div>
                    </div>
                `;
            } else if (lowerQuery.includes('faith')) {
                // Simulation for a complex theological concept search
                resultsHTML = `
                    <div class="result-group">
                        <h3>Factbook: Concept Analysis</h3>
                        <div class="result-card factbook">
                            <p><strong>Faith (Theological Concept)</strong></p>
                            <small>Definition, Greek/Hebrew Roots, Historical usage. Click to open full Factbook article in the side panel.</small>
                        </div>
                    </div>
                    <div class="result-group" style="margin-top: 20px;">
                        <h3>Top Passage Matches (Layered Glass)</h3>
                        <div class="result-card">Romans 1:17: "The righteous shall live by faith."</div>
                        <div class="result-card">Hebrews 11:1: "Now faith is the substance of things hoped for..."</div>
                    </div>
                `;
            } else if (lowerQuery.includes('god')) {
                // Simulation for a broad keyword search
                resultsHTML = `
                    <div class="result-group">
                        <h3>Top Keyword Matches</h3>
                        <div class="result-card">Topic: Attributes of God</div>
                        <div class="result-card">Systematic Theology: Doctrine of God (Page 45)</div>
                    </div>
                `;
            } else {
                // No match
                resultsHTML = `<p style="text-align: center;">No Smart Search matches found for "${query}" in your library.</p>`;
            }

            resultsDiv.innerHTML = resultsHTML;
            resultsDiv.style.display = 'block';
        }

        // --- 4. Dynamic Factbook Content Load ---
        function loadPassageGuide() {
            const content = `
                <h4 style="color: #F0F4F8; margin-top: 15px;">Passage Guide for John 1:1</h4>
                <p><strong>Outline:</strong> Prologue</p>
                <p><strong>People:</strong> Jesus, God</p>
                <p><strong>Themes:</strong> Pre-existence of Christ, Deity of Christ, Creation</p>
            `;
            document.getElementById('dynamicFactbookContent').innerHTML = content;
        }

        function loadLexicon() {
             const content = `
                <h4 style="color: #F0F4F8; margin-top: 15px;">Lexicon Loaded</h4>
                <p>Greek Word: <strong>萎</strong> (Arche) - Beginning, rule.</p>
                <p>Hebrew Word: <strong>职旨专值砖执转</strong> (Bereshit) - In the beginning (Genesis).</p>
            `;
            document.getElementById('dynamicFactbookContent').innerHTML = content;
        }

        // Add event listener to close search results when clicking outside
        document.addEventListener('click', function(e) {
            const resultsDiv = document.getElementById('searchResults');
            const searchInput = document.getElementById('smartSearch');
            
            if (!resultsDiv.contains(e.target) && e.target !== searchInput) {
                resultsDiv.style.display = 'none';
            }
        });

    </script>
</body>
</html>